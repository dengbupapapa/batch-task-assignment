!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).batchTaskAssignment=e()}(this,(function(){"use strict";return function({delay:t=200,unitMaximum:e=10}={delay:200,unitMaximum:10}){let n,s;return function(i){let u=[],a={resolves:[],datas:u,dataLengths:[]};function o(){if(n&&clearTimeout(n),a.datas.length>=e)return f();n=setTimeout((function(){f()}),t)}function f(){let t=u.splice(0,e);s=!0,i(t,l)}let r=[];function l(t){for(t.unshift(...r.splice(0));!(t.length<a.dataLengths[0])&&a.dataLengths[0];){let e=t.splice(0,a.dataLengths[0]);a.resolves[0](e),a.resolves.shift(),a.dataLengths.shift()}r.push(...t),a.datas.length>0?o():s=!1}return function(t){return new Promise((function(e){if(a.resolves.push(e),a.datas.push(...t),a.dataLengths.push(t.length),s)return"working";o()}))}}}}));
